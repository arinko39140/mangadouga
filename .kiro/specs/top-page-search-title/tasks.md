# Implementation Plan

- [x] 1. (P) 検索クエリとタイトルの正規化・部分一致判定を実装する
  - クエリ/タイトルに同一の正規化ルールを適用し、大小文字と全半角の差を吸収できるようにする
  - 先頭/末尾の空白を除去し、連続空白を単一スペースに整形する
  - 正規化済み文字列同士の部分一致で検索判定できるようにする
  - _Requirements: 2.2, 2.3, 2.4, 2.5_

- [x] 2. (P) 検索対象の全件データ取得を拡張する
  - 過去分を含む全一覧データを取得できる経路を追加する
  - タイトル検索に必要な最小フィールドのみを取得できるようにする
  - `update`欠損データを検索対象から除外する
  - _Requirements: 2.1_

- [ ] 3. 検索状態と実行フローを管理する
- [ ] 3.1 入力値と適用クエリを分離して保持し、空クエリは未適用へ戻す
  - 入力値は検索入力欄の変更に追随して保持する
  - ボタン/Enterでのみ検索を適用し、入力中の値では即時検索しない
  - 正規化後に空となる場合は検索未適用状態へ戻す
  - _Requirements: 1.1, 1.2, 1.3_

- [ ] 3.2 検索実行時にデータ取得・キャッシュ・結果更新を行う
  - 初回検索時に全件データを取得し、再検索時はキャッシュを再利用する
  - 新しいクエリで再検索した場合は結果を上書きする
  - 取得失敗時の状態とメッセージ表示用の情報を保持する
  - _Requirements: 2.6_

- [ ] 4. トップページに検索UIの導線を組み込む
- [ ] 4.1 検索入力欄・検索ボタン・Enter操作をトップページに統合する
  - 入力値が検索状態に反映されるように接続する
  - ボタン/Enterで検索が適用される導線を明示する
  - _Requirements: 1.1, 1.2_

- [ ] 5. 検索結果表示と一覧切替を反映する
- [ ] 5.1 検索適用中は検索結果一覧、未適用時は通常一覧を表示する
  - 検索結果が0件のときは該当なしメッセージを表示する
  - _Requirements: 3.1, 3.2, 3.3_

- [ ] 5.2 検索結果は100件制限を解除し、過去100件セクションは維持する
  - 検索結果一覧は過去100件制限を適用しない
  - 過去100件の作品セクションは従来どおり表示する
  - _Requirements: 3.4, 3.5_

- [ ] 6. タイトル検索のテストを追加する
- [ ] 6.1 正規化と部分一致判定の単体テストを用意する
  - 大小文字・全半角・空白整形が期待どおりに判定されることを確認する
  - _Requirements: 2.2, 2.3, 2.4, 2.5_

- [ ] 6.2 検索入力から適用・解除・再検索までの統合テストを追加する
  - 入力値の保持、ボタン/Enterによる検索適用、空クエリ時の未適用復帰を検証する
  - クエリ更新時に結果が更新されることを確認する
  - _Requirements: 1.1, 1.2, 1.3, 2.6_

- [ ] 6.3 一覧表示の切替と件数表示の統合テストを追加する
  - 検索適用中/未適用時の一覧切替と0件メッセージを検証する
  - 検索中は100件制限が解除され、過去100件セクションが維持されることを確認する
  - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5_
