# Implementation Plan

- [ ] 1. グローバルUIトークンとタイポグラフィ基盤の整備
- [x] 1.1 トークン/フォント/階層スタイルを共通化し、Reactページの基準を確立する
  - 色・フォント・余白・影・角丸の共通トークンを定義し、Reactページのベースに適用する
  - 見出し/本文/補足のタイポグラフィ階層を共通ルールとして揃える
  - 対象範囲がReactページのみであることを明示し、対象外ページは影響しないようにする
  - フォント読み込みとフォールバックの規則を統一する
  - _Requirements: 1.1, 1.3, 1.4, 1.5, 2.1_

- [x] 1.2 コントラスト基準と低コントラスト調整の方針を反映する
  - AA相当のコントラスト基準を基にトークン配色を調整する
  - 主要テキスト/補足/ボタンラベル/フォーカスリングの対象範囲を明確化する
  - 低コントラストが検出された場合の調整ルールをページ適用に反映する
  - 測定方法と記録方針を実装成果物に反映できる形で整理する
  - _Requirements: 2.3, 2.5, 7.1, 7.4_

- [ ] 2. ナビゲーション共通パターンの統一
- [x] 2.1 ナビゲーションの階層/状態/余白ルールを統一し、主要ページへ展開する
  - アクティブ/非アクティブ/ホバー/フォーカスの視覚ルールを共通化する
  - 主要ページのナビゲーションに共通ルールを適用して差異を縮小する
  - 固定ヘッダーやコンテンツ重なりでナビが隠れないことを確認する
  - _Requirements: 1.2, 3.5_

- [ ] 3. カード/ボタン/バッジ/タグの共通パターン整備
- [x] 3.1 主要/補助カードの視覚差と一覧レイアウトを整理する
  - 主要カードと補助カードのスタイル差を明確化する
  - カード間隔と配置ルールを整理し、一覧性を維持する
  - 画面幅変化時の再配置ルールを整理し、読みやすさを保つ
  - _Requirements: 3.1, 3.2, 3.4, 3.5_

- [x] 3.2 重要情報の強調と画像上テキストの可読性を確保する
  - タイトル/作者/カテゴリなど重要情報の強調ルールを適用する
  - 画像や装飾上のテキストに可読性を確保する処理を組み込む
  - 装飾要素が多い場合でも主要情報が埋もれない表現に整える
  - _Requirements: 2.2, 2.4, 7.3_

- [x] 3.3 状態変化の視覚的手がかりとホバー/フォーカス反応を統一する
  - 選択/警告/非活性などの状態変化に色以外の手がかりを付与する
  - ホバー/フォーカス時の反応を共通ルールで整える
  - _Requirements: 3.3, 7.2, 3.5_

- [ ] 4. モーションポリシーと表示演出の導入
- [x] 4.1 初回ロード演出の共通モーションを定義し、全ページに適用する
  - 初回ロードの段階表示アニメーションを共通ルールとして定義する
  - 速度/量を読みやすさを阻害しない範囲に調整する
  - `prefers-reduced-motion` の抑制対象を明確化する
  - _Requirements: 4.1, 4.3, 4.5_

- [x] 4.2 カード出現モーションの付与ロジックを導入し、重点ページに適用する
  - 画面内出現を検知する共通ロジックを用意する
  - 重点ページのカード/リストへ出現モーションを適用する
  - _Requirements: 4.2, 4.3, 4.5_

- [x] 4.3 動き抑制時のホバー/出現表現を最小化する
  - 動き抑制時は移動/拡大を避け、可視性重視の表現に切り替える
  - ホバー時の大きな変化を抑え、軽微な変化に限定する
  - _Requirements: 4.4, 4.5_

- [ ] 5. フォーカスリングとキーボード操作の統一
- [x] 5.1 `:focus-visible` 基準のフォーカスリングを定義し、全ページで可視化する
  - フォーカスリングの色/太さ/表示規則を統一する
  - フォーカスが背景に埋もれないようコントラストを確保する
  - 既存の `outline: none` を共通規則で置き換える
  - _Requirements: 2.3, 6.2, 6.5, 7.1_

- [x] 5.2 主要操作のキーボード到達性とフォーカス順序を監査し是正する
  - 主要導線の操作がキーボードのみで到達できることを確認する
  - クリック可能要素を適切なセマンティクスに置換する
  - 操作不能要素がフォーカス順に含まれないよう整理する
  - _Requirements: 6.1, 6.3_

- [x] 5.3 モーダル/ポップアップのフォーカストラップと復帰挙動を整える
  - フォーカスをモーダル内に閉じ込めるルールを実装・適用する
  - 閉じた後に起点要素へフォーカスを戻す挙動を揃える
  - 背景要素のフォーカス到達を抑止する
  - _Requirements: 6.4_

- [ ] 6. データ更新フローの単一参照源を整備する
- [ ] 6.1 (P) CSV/JSON/Supabase更新手順と検証項目を最新化する
  - 更新手順を手順化し、入力項目・形式・配置場所を明確化する
  - 代表的な失敗例と対処方法を整理する
  - 更新後に確認すべき表示チェック項目を含める
  - データ範囲と反映先を明示し、SSOTがSupabaseであることを明記する
  - _Requirements: 5.1, 5.2, 5.3, 5.4, 5.5_

- [ ] 7. 統合検証とテスト整備
- [ ] 7.1 基盤スタイル/モーション/フォーカスの単体検証を整備する
  - トークン参照が主要ページに適用されていることを確認する
  - 動き抑制時にアニメーションが最小化されることを確認する
  - フォーカス可視化が適用されることを確認する
  - _Requirements: 1.1, 4.4, 6.2_

- [ ] 7.2 重点ページでカード/ナビ/レイアウトの整合性を検証する
  - Top/OshiLists/Work/History の主要UIが共通パターンに一致することを確認する
  - 画面幅変更時にカード配置が読みやすさを保つことを確認する
  - _Requirements: 1.2, 3.1, 3.4_

- [ ]* 7.3 低視力向けの視認性と状態表現をE2Eで確認する
  - 画像上テキストの可読性と色以外の手がかりを確認する
  - 主要導線のコントラストが基準を満たすことを確認する
  - _Requirements: 2.4, 7.2, 7.3_
