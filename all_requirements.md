# 要件定義（ドラフト）

## 1. 目的・背景
- YouTubeにある漫画動画を本サイトに掲載し、管理・公開できるようにする。
- 推しリストや推し作品で、自分の好きな作品を管理・公開できる仕組みを提供する。
- ユーザーは自分の推しリストや推し作品を整理し、必要に応じて公開/非公開を切り替えられる。

## 2. 想定ユーザー
- 推し作品・シリーズをコレクションしたい一般ユーザー
- 他ユーザーの推しリストを閲覧したいユーザー

## 3. スコープ（今回対象）
### 3.1 対象画面
- トップページ（`サイト画面/トップページ.png`）
- みんなの推しリスト一覧（`サイト画面/みんなのマイリスト.png`）
- お気に入り推しリスト（`サイト画面/お気に入り推しリスト.png`）
- 他ユーザーマイページ（`サイト画面/他マイページ.png`）
- 作品ページ（`サイト画面/作品ページ.png`）
- 閲覧履歴（`サイト画面/履歴.png`）
- 推しリスト（`サイト画面/推しリスト.png`）
- 他ユーザーの推し作品一覧（`サイト画面/推し作品（他）.png`）
- マイページ（`サイト画面/マイページ.png`）

### 3.2 フェーズ/ステップ別対象ページ
- フェーズ1/ステップ1: トップページ
- フェーズ1/ステップ2: 作品ページ
- フェーズ1/ステップ3: 推しリスト
- フェーズ1/ステップ4: みんなの推しリスト一覧, お気に入り推しリスト
- フェーズ1/ステップ5: 他ユーザーマイページ, 他ユーザーの推し作品一覧
- フェーズ1/ステップ6: マイページ
- フェーズ2/ステップ7: トップページ, みんなの推しリスト一覧, 作品ページ
- フェーズ3/ステップ8: トップページ
- フェーズ3/ステップ9: 閲覧履歴
- フェーズ3/ステップ10: 作品シリーズのまとめページ
- フェーズ4/ステップ11: 全ページ

### 3.3 対象外
- なし（PNG提供分は全て反映）
- 認証/決済などの外部連携は未定義

## 4. 機能要件

### 4.0 共通
- ヘッダーにサイト名を表示
- 未ログイン時はログイン/新規導線を表示
- 一覧の表示形式はグリッド/リスト切替が可能（推しリスト画面）

### 4.0.1 ナビゲーション
- トップのタブ切替: 皆の推しリスト / 推しリスト / 推し作品
- トップの曜日フィルタ: 月〜日

### 4.0.2 ソート
- みんなの推しリスト一覧: 「お気に入り数」などでソート
- 作品ページ: 「最新話」などでソート
- 一覧共通: 投稿日/人気/追加日のソート

### 4.0.3 検索
- タイトルで検索可能

### 4.0.4 公開/非公開
- 各画面の公開/非公開切替は対象範囲を明示（リスト/作品/ユーザー）

### 4.0.5 曜日別一覧
- 週7日の曜日別で動画一覧を表示

### 4.0.6 登録状態の保存
- お気に入り/推しの登録状態はログインユーザーに紐づけて保持

### 4.0.7 動画カード要素
- タイトル/サムネ/投稿日/YouTubeリンクを表示

### 4.0.8 作品シリーズのまとめページ
- シリーズ単位の一覧/詳細ページを提供

### 4.1 トップページ
- 皆の推しリスト / 推しリスト / 推し作品 のタブ切替
- 曜日フィルタ（作品の更新曜日）
- 検索（タイトル）
- みんなの最推し動画
  - 作品サムネ
  - 推しバッジ
  - 作品リンク導線
- 閲覧履歴（直近の視聴/閲覧）
- 掲載動画一覧
  - 作品サムネ
  - 推しバッジ
  - 推し数表示
  - 作品リンク導線

### 4.2 みんなの推しリスト一覧
- 推しリストのカード一覧
  - お気に入り数
  - リスト名
  - 作成ユーザー名/アイコン
  - お気に入り登録（スター）
- ソート（お気に入り数: 昇順/降順切替）

### 4.3 お気に入り推しリスト
- 「○○さんのお気に入り推しリスト」表示
- 推しリストのカード一覧
  - リスト名
  - 作成ユーザー名/アイコン
- 公開/非公開切替
- 登録済みのみ表示

### 4.4 他ユーザーマイページ
- ユーザー情報表示
  - ユーザー名
  - アイコン
  - 外部リンク（X / YouTube / その他）
- ユーザーの推しリスト一覧
- 推し作品一覧
- お気に入り推しリスト一覧
- お気に入り登録（スター）

### 4.5 作品ページ
- 作品名・推し数の表示
- お気に入り登録（スター）
- 作品動画の再生領域
- 最新話の強調表示
  - 投稿日
  - 推し数
- 話数一覧
  - サムネ
  - タイトル
  - 日付
  - 推しバッジ
- ソート（最新話）

### 4.6 推しリスト
- タブ切替（動画/作品）
- 公開/非公開切替
- 表示形式切替（グリッド/リスト）
- 登録済みのみ表示
- 推し作品カード一覧
  - サムネ
  - 推しバッジ
  - タイトル
  - 「推」ボタン（未登録時）/「済」表示（登録済み）

### 4.7 他ユーザーの推し作品一覧
- 「○○さんの推し作品一覧」表示
- 作品カード一覧
  - サムネ
  - 作品名

### 4.8 マイページ
- プロフィール情報表示
  - ユーザー名
  - プロフィール画像（アイコン）
  - 外部リンク（X / YouTube / その他リンク）
- プロフィール編集導線（鉛筆アイコン）
- 推しリストセクション
  - 推し作品のカード一覧（サムネ/タイトル）
  - セクション単位の公開/非公開切替
  - 作品ごとの「推」ボタン
    - 未登録: 「推」
    - 登録済み: 「済」
- 推し作品セクション
  - 作品サムネ/タイトル一覧
  - セクション単位の公開/非公開切替
- お気に入り推しリストセクション
  - 他ユーザーの推しリスト一覧（ユーザー名 + アイコン）
  - セクション単位の公開/非公開切替

### 4.9 作品シリーズのまとめページ
- シリーズ名/説明
- シリーズ内の動画一覧

### 4.10 閲覧履歴
- ページタイトル: 閲覧履歴
- 履歴カード一覧
  - サムネ
  - タイトル
  - 投稿日
  - 推し数

## 5. データ要件（CSVより）

### 5.1 テーブル/シート定義（初期）

#### users
- user_id（PK）
- name
- X_url
- youtube_url
- other_url

#### list
- list_id（PK）
- user_id（FK: users.user_id）
- favorite_count
- can_display（公開可否）

#### user_list
- user_id（FK: users.user_id）
- list_id（FK: list.list_id）
- can_display（公開可否）

#### user_series
- user_id（FK: users.user_id）
- series_id（FK: series.series_id）
- can_display（公開可否）

#### series
- series_id（PK）
- title
- favorite_count

#### movie
- movie_id（PK）
- movie_title
- url
- favorite_count
- update（更新日）
- series_id（FK: series.series_id）
- weekday（更新曜日）

#### list_movie
- list_id（FK: list.list_id）
- movie_id（FK: movie.movie_id）
- ユーザーの推しリストに追加された動画の対応関係

#### history
- history_id（PK）
- user_id（FK: users.user_id）
- movie_id（FK: movie.movie_id）
- click_time

### 5.2 画面との対応（暫定）
- トップページの作品一覧/曜日: movie.weekday, movie.update
- 検索: movie.movie_title
- 作品ページ: series, movie, list_movie
- みんなの推しリスト一覧: list, list_movie, users
- マイページのユーザー情報: users
- 推しリスト/公開可否: list, user_list, list_movie, movie
- 推し作品/シリーズ: series, movie, user_series
- 公開/非公開: list.can_display / user_list.can_display / user_series.can_display
- 「推」ボタン（追加）: list_movie
- 閲覧履歴: history, movie, users

## 6. 権限・公開範囲
- ユーザーは各セクションごとに公開/非公開を切り替えられる。
- 公開状態の一覧は他ユーザーから閲覧可能。
- 非公開状態は本人のみ閲覧可能。
- お気に入り登録（スター）は「他ユーザーの公開推しリスト」のみ対象。
- 公開/非公開の対象は以下の3つで、それぞれ個別に切替可能。
  - 推しリスト
  - 推し作品
  - お気に入り推しリスト

## 7. 非機能要件（暫定）
- モバイル/PCのレスポンシブ対応
- 画像サムネイルの最適化（遅延読み込み）
- 公開/非公開切替は即時反映（キャッシュ設計は後決定）
- 見た目の強化（タイポ/配色/カード強調）
- アニメーション（初回ロード、カードの出現）
- アクセシビリティ調整（キーボード操作、コントラスト）

## 8. 運用/更新
- データ更新フローの整理（CSV/JSON編集手順）

## 9. 未確定事項/質問
### 9.1 作品ページの並び替え
- 作品を「最新話から」または「1話目（最も古い話）から」で切替可能にする。
- 「最新話」は movie.update が最も新しい話を指す。
- 「話数」は series が持つ movie の件数。
